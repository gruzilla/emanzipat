!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,i,n){"use strict";n.r(i);class s{constructor(t,e){this.id=t,this.settings=e}render(){return this.settings.hasOwnProperty("d")?'<div id="urlSiloData" contenteditable="true">'+this.settings.d+"</div>":(console.error("https://github.com/gruzilla/emanzipat/blob/master/codes.md#urlSilo.noData"),"ERROR. See console.")}save(){this.settings.d=document.getElementById("urlSiloData").innerHTML}getId(){return this.id}getName(){return s.NAME}getSettings(){return this.settings}}s.NAME="url",s.DEFAULT_SETTINGS={d:"拜托, chänge moi (:"};class r{constructor(){this.valid=!1,this.id=null,this.data=null;let[,t,i]=window.location.href.match(r.URL_PATTERN)||[];if(void 0!==t&&void 0!==i){this.id=t;try{this.data=JSON.parse(decodeURIComponent(i))}catch(t){return console.error("https://github.com/gruzilla/emanzipat/blob/master/codes.md#silo.invalid",t),void(this.valid=!1)}this.data.hasOwnProperty("d")&&this.data.hasOwnProperty("s")&&this.data.d.hasOwnProperty("l")&&this.data.d.hasOwnProperty("v")&&this.data.d.hasOwnProperty("id")||(console.error("https://github.com/gruzilla/emanzipat/blob/master/codes.md#silo.invalid",e),this.valid=!1),this.valid=!0}else this.valid=!1}static getInitializationUrl(){let t=r.generateId();return console.info("https://github.com/gruzilla/emanzipat/blob/master/codes.md#initialized"),"/silo/"+t+"/"+encodeURIComponent(JSON.stringify(this.wrapSettings(t,s.NAME,s.DEFAULT_SETTINGS)))}static getUrl(t){return console.info("https://github.com/gruzilla/emanzipat/blob/master/codes.md#updated"),"/silo/"+t.getId()+"/"+encodeURIComponent(JSON.stringify(this.wrapSettings(t.getId(),t.getName(),t.getSettings())))}static generateId(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}static wrapSettings(t,e,i){return{d:{v:r.VERSION,id:t,l:e},s:i}}isValid(){return this.valid}getId(){return this.id}getSettings(){return this.data.s}getLoaderName(){return this.data.d.l}}r.VERSION=0,r.URL_PATTERN=/\/silo\/([^/]+)\/([^/]+)/u;class a{constructor(t,e){this.barId=t,this.silo=e,this.render()}render(){document.getElementById(this.barId).innerHTML='<div class="buttons"><button id="emanzibarNew">new</button><button id="emanzibarSave">save</button></div>',document.getElementById("emanzibarSave").addEventListener("click",this.save.bind(this)),document.getElementById("emanzibarNew").addEventListener("click",this.new.bind(this))}save(){this.silo.save(),window.location.href=r.getUrl(this.silo)}new(){window.location.href=r.getInitializationUrl()}}class o{constructor(t,e){this.contentId=t,this.barId=e,this.silo=null;let i=new r;if(i.isValid())return this.loadSilo(i.getLoaderName(),i.getId(),i.getSettings()),void this.loadBar();this.showCreateSilo()}showCreateSilo(){let t=document.getElementById(this.contentId);t.innerHTML='<h1>welcome to emanzip.at</h1><p><a href="https://github.com/gruzilla/emanzipat">read me</a><p><button id="createSilo">create new silo</button></p>',t.classList.add("init"),document.getElementById("createSilo").addEventListener("click",o.createSilo)}static createSilo(){window.location.href=r.getInitializationUrl()}loadSilo(t,e,i){switch(this.silo=null,t){case"url":default:this.silo=new s(e,i)}let n=document.getElementById(this.contentId);n.innerHTML=this.silo.render(),n.classList.remove("init"),n.classList.add(t),console.info("https://github.com/gruzilla/emanzipat/blob/master/codes.md#rendered")}loadBar(){new a(this.barId,this.silo)}}new o("main","emanzibar")}]);